{% extends 'base_template.html' %}
{% load staticfiles %}
{% load humanize %}

{% block style %}
    {% static 'orderApp/css/order_style.css' %}
{% endblock %}

{% block context %}
{#    <h1>TOTAL {{ order.get_total_price }}</h1>#}
{#    {% for item in order %}#}
{#        {{ item }}#}
{#        <h2>name: {{ item.product }}</h2>#}
{#        <img src="{{ item.product.images_product.first.image.url }}" alt="">#}
{#        <h2>price: {{ item.price }}</h2>#}
{#        <h2>count: {{ item.count }}</h2>#}
{#        <h2>size: {{ item.size }}</h2>#}
{#        {% if item.error_count %}#}
{#            {{ item.error_count }}#}
{#        {% endif %}#}
{#        <h2>{{ item.total_price }}</h2>#}
{#        <a href="{% url 'orderApp:order_remove' item.id %}">delete</a>#}
{#        <br><br>#}
{#    {% endfor %}#}
{#    <a href="{% url 'orderApp:order_clear' %}">clear</a>#}

    <section class="order">
        <div class="container-order">
            <h2>Корзина</h2>

            {% for product_order in order %}
                <div class="product_order">
                    <img src={{ product_order.product.images_product.first.image.url }} alt="">
                    <div class="product_order_text">
                        <div class="delete">
                            <a href="{% url 'orderApp:order_remove' product_order.id %}" >&times;</a>
                        </div>

                        <h3 class="name">{{ product_order.product }}</h3>
                        <div class="size_price">
                            <div>
                                <h4>Размер</h4>
                                <h5>{{ product_order.size }}</h5>
                            </div>
                            <div>
                                <h4>Цена</h4>
                                <h5>{{ product_order.total_price|intcomma }} руб.</h5>
                            </div>
                        </div>
                        <div class="count">
                            <h4>Количество</h4>
                            <h5>
                                {{ product_order.count }}
                                <span class="error_count">
                                {% if product_order.error_count %}
                                    {{ product_order.error_count }}
                                {% endif %}
                            </span>
                            </h5>

                        </div>
                    </div>
                </div>
            {% endfor %}

            {% if order %}
                <hr>
                <a href="{% url 'orderApp:order_clear' %}">clear</a>
                <div class="total">
                    <div>
                        <div>
                            <h4>Товары</h4>
                            <h5>{{ order.get_total_price|intcomma }} руб.</h5>
                        </div>
                        <div>
                            <h4>Стандартная доставка</h4>
                            <h5>490 руб.</h5>
                        </div>
                        <div>
                            <h4>Бесплатная стандартная доставка</h4>
                            <h5>-490 руб.</h5>
                        </div>
                        <div>
                            <h4>Итог</h4>
                            <h5>{{ order.get_total_price|intcomma }} руб.</h5>
                        </div>
                        <a href="#">Обработать заказ</a>
                    </div>
                </div>
            {% else %}
                <h3>Ваша корзина пуста.</h3>
            {% endif %}


        </div>
    </section>
{% endblock %}