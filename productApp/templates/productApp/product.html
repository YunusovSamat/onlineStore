{% extends 'base_template.html' %}
{% load staticfiles %}
{% load humanize %}

{% block style %}
    {% static 'productApp/css/product_style.css' %}
{% endblock %}

{% block context %}
    <a href="{% url 'orderApp:order_clear' %}">clear</a>
    <section>
        <div class="container-2">
            <div id="window_size">
                <div class="window_size_context">
                    <span id="window_size_close">&times;</span>
                    <h1>table</h1>
                    <img src="{{ product.images_product.first.image.url }}" alt="">
                </div>
            </div>
        </div>
    </section>

    <section class="back">
        <div class="container-2">
            <a href="javascript:history.go(-1)">Назад</a>
        </div>
    </section>

    <section class="product">
        <div class="container-2">
            <div class="block_product">
                <div class="tile_images">
                    {% for image in product.images_product.all %}
                        <img src="{{ image.image.url }}" alt="">
                    {% endfor %}
                </div>
                <div class="block_text">
                    <form id="form1" action="{% url 'orderApp:order_add' %}" method="get"></form>
                    <input form="form1" type="hidden" name="product_id" id="id_product" value={{ product.id }}>
                    <input form="form1" type="hidden" name="count" id="id_count" value="1">
                    <div class="block_name_price">
                        <h2>{{ product.name }}</h2>
                        <h2>{{ product.price|intcomma }} руб.</h2>
                    </div>
                    <div class="block_size">
                    {% for count in product.counts.all %}
                        {% ifnotequal count.count 0 %}
                            <label>
                                <input form="form1" type="radio" name="size" id="id_size"
                                       value="{{ count.fk_size }}" required onclick="radioVal();">
                                <span>{{ count.fk_size }}</span>
                            </label>
                        {% else %}
                            <span class="block_disabled">{{ count.fk_size }}</span>
                        {% endifnotequal %}
                    {% endfor %}
                    </div>
                    <div class="block_size_description">
                        <h4 id="window_size_open">Руководство по размерам</h4>
                        <h4 id="size_value">Размер не выбран</h4>
                    </div>
                    <button form="form1" class="link_button" type="submit">Добавить в корзину</button>
                    <div class="block_description">
                        <h3>Информация о товаре</h3>
                        <p>{{ product.description }}</p>
                    </div>
                    <div class="block_link_more">
                        <a href="#">Состав и уход</a>
                        <a href="#">Доставка</a>
                        <a href="#">Возврат</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        var window_size = document.getElementById('window_size');
        var btn_open = document.getElementById("window_size_open");
        var btn_close = document.getElementById("window_size_close");

        btn_open.onclick = function () {
            window_size.style.display = 'block';
        };

        btn_close.onclick = function () {
            window_size.style.display = 'none';
        }

        window_size.onclick = function (e) {
            if (e.target == window_size) {
                window_size.style.display = 'none';
            }
        }
    </script>

    <script>
        function radioVal() {

            var size_val = document.getElementById("form1").elements["size"].value;
            document.getElementById("size_value").innerHTML = "Ваш размер " + size_val;
        }
    </script>
{% endblock %}